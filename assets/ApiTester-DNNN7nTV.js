import{O as G,r as k,W as K,o as W,c as r,e as l,x as o,B as f,A as c,f as X,J as Q,j as h,Q as n,F as V,i as w,p as Y,t as y,d}from"./vue-vendor-CjDfc70Z.js";import{z as b,l as _,x as Z,a as g,h as ee,B as le,j as R}from"./primevue-CnIjzyZF.js";const te={class:"bg-gray-100 py-2 px-4 rounded-md shadow-sm mb-6"},se={class:"text-sm","aria-label":"Miga de pan"},ae={class:"list-none p-0 inline-flex space-x-2"},oe={class:"flex items-center"},ne={class:"max-w-7xl mx-auto px-4 py-4"},ue={class:"grid md:grid-cols-2 gap-6"},ie={class:"space-y-4"},re={class:"space-y-3"},de={class:"flex gap-2"},pe={class:"flex-1"},ce={class:"flex-1"},me={class:"space-y-2"},ve={key:0},ye={class:"space-y-2"},be={key:0,class:"space-y-2"},xe={key:1,class:"space-y-2"},fe={key:2,class:"space-y-2"},he={class:"space-y-2 max-h-96 overflow-y-auto"},ge=["onClick"],ke={class:"flex items-center justify-between"},Te={class:"font-mono text-sm font-semibold"},Ve={class:"text-xs text-gray-500 truncate"},we={class:"text-xs text-gray-600 mt-1"},_e={key:0,class:"text-center text-gray-500 text-sm py-4"},Ue={key:0,class:"space-y-4"},Ce={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},Ee={class:"flex items-center gap-3"},Ae={class:"text-sm text-gray-600"},Pe={class:"text-sm text-gray-500"},Se={class:"grid md:grid-cols-2 gap-6"},Re={class:"bg-gray-50 p-3 rounded-lg max-h-60 overflow-y-auto"},Oe={class:"text-blue-600"},je={class:"text-gray-700 ml-2"},De={class:"flex items-center justify-between mb-2"},He={class:"flex gap-2"},Be={class:"bg-gray-900 text-green-400 p-4 rounded-lg max-h-60 overflow-y-auto"},Ne={class:"text-sm"},Le={key:1,class:"text-center text-gray-500 py-8"},ze=G({__name:"ApiTester",setup($e){const t=k({url:"",method:"GET",timeout:5e3,headers:[],body:"",bodyType:"json",auth:{type:"none"}}),i=k(null),T=k(!1),x=k([]),O=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"},{label:"DELETE",value:"DELETE"},{label:"HEAD",value:"HEAD"},{label:"OPTIONS",value:"OPTIONS"}],j=[{label:"JSON",value:"json"},{label:"Form Data",value:"form"},{label:"XML",value:"xml"},{label:"Text",value:"text"}],D=[{label:"Sin autenticación",value:"none"},{label:"Basic Auth",value:"basic"},{label:"Bearer Token",value:"bearer"},{label:"API Key",value:"apikey"}],U=K(()=>["POST","PUT","PATCH"].includes(t.value.method)),C=()=>{t.value.headers.push({key:"",value:""})},H=a=>{t.value.headers.splice(a,1)},B=a=>a>=200&&a<300?"bg-green-100 text-green-800":a>=300&&a<400?"bg-blue-100 text-blue-800":a>=400&&a<500?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",N=a=>{try{return a.startsWith("{")||a.startsWith("[")?JSON.stringify(JSON.parse(a),null,2):a}catch{return a}},L=async()=>{if(!t.value.url)return;T.value=!0;const a=Date.now();try{const e={};if(t.value.headers.forEach(p=>{p.key&&p.value&&(e[p.key]=p.value)}),t.value.auth.type==="basic"&&t.value.auth.username&&t.value.auth.password){const p=btoa(`${t.value.auth.username}:${t.value.auth.password}`);e.Authorization=`Basic ${p}`}else t.value.auth.type==="bearer"&&t.value.auth.token?e.Authorization=`Bearer ${t.value.auth.token}`:t.value.auth.type==="apikey"&&t.value.auth.key&&t.value.auth.value&&(e[t.value.auth.key]=t.value.auth.value);let u=null;if(U.value&&t.value.body)if(t.value.bodyType==="json")try{u=JSON.parse(t.value.body),e["Content-Type"]="application/json"}catch{u=t.value.body}else if(t.value.bodyType==="form"){const p=new FormData;t.value.body.split(`
`).forEach(M=>{const[P,S]=M.split("=");P&&S&&p.append(P.trim(),S.trim())}),u=p}else u=t.value.body,e["Content-Type"]=t.value.bodyType==="xml"?"application/xml":"text/plain";const s=new AbortController,v=setTimeout(()=>s.abort(),t.value.timeout),m=await fetch(t.value.url,{method:t.value.method,headers:e,body:u instanceof FormData?u:u?JSON.stringify(u):void 0,signal:s.signal});clearTimeout(v);const z=await m.text(),E={};m.headers.forEach((p,A)=>{E[A]=p});const J=Date.now();i.value={status:m.status,statusText:m.statusText,headers:E,body:z,time:J-a};const F={...t.value,timestamp:Date.now(),response:i.value};x.value.unshift(F),x.value.length>10&&(x.value=x.value.slice(0,10))}catch(e){const u=Date.now();i.value={status:0,statusText:"Error",headers:{},body:e.message||"Error de red",time:u-a}}finally{T.value=!1}},$=a=>{t.value={...a},a.response&&(i.value=a.response)},I=()=>{i.value&&navigator.clipboard.writeText(i.value.body)},q=()=>{if(i.value){const a=new Blob([i.value.body],{type:"text/plain"}),e=URL.createObjectURL(a),u=document.createElement("a");u.href=e,u.download="response.txt",u.click(),URL.revokeObjectURL(e)}};return W(()=>{C()}),(a,e)=>{const u=X("router-link");return d(),r("div",null,[l("div",te,[l("nav",se,[l("ol",ae,[l("li",oe,[o(u,{to:"/",class:"text-blue-500 hover:text-blue-700"},{default:f(()=>e[11]||(e[11]=[l("i",{class:"pi pi-home mr-1"},null,-1),c(" Herramientas ")])),_:1,__:[11]})]),e[12]||(e[12]=l("li",null,[l("i",{class:"pi pi-chevron-right text-gray-400"})],-1)),e[13]||(e[13]=l("li",{class:"text-gray-700"},"API Tester",-1))])])]),l("div",ne,[e[27]||(e[27]=l("div",{class:"text-center mb-8"},[l("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},[l("i",{class:"pi pi-globe mr-3 text-blue-600"}),c(" API Tester ")]),l("p",{class:"text-gray-600"}," Prueba APIs REST con diferentes métodos HTTP, headers y autenticación ")],-1)),o(n(R),{class:"mb-6"},{title:f(()=>e[14]||(e[14]=[l("h2",{class:"text-xl font-semibold text-gray-800 flex items-center justify-center gap-2"},[l("i",{class:"pi pi-cog text-blue-600"}),c(" Configuración del Request ")],-1)])),content:f(()=>[l("div",ue,[l("div",ie,[l("form",{onSubmit:Q(L,["prevent"]),class:"space-y-4"},[l("div",re,[l("div",null,[e[15]||(e[15]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-link mr-2"}),c(" URL ")],-1)),o(n(b),{modelValue:t.value.url,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.url=s),class:"w-full",placeholder:"https://api.example.com/endpoint",required:""},null,8,["modelValue"])]),l("div",de,[l("div",pe,[e[16]||(e[16]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-arrow-right mr-2"}),c(" Método ")],-1)),o(n(_),{modelValue:t.value.method,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.method=s),options:O,optionLabel:"label",optionValue:"value",placeholder:"GET",class:"w-full"},null,8,["modelValue"])]),l("div",ce,[e[17]||(e[17]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-clock mr-2"}),c(" Timeout ")],-1)),o(n(Z),{modelValue:t.value.timeout,"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.timeout=s),class:"w-full",min:1e3,max:6e4,step:1e3,placeholder:"5000"},null,8,["modelValue"])])])]),l("div",null,[e[18]||(e[18]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-list mr-2"}),c(" Headers ")],-1)),l("div",me,[(d(!0),r(V,null,w(t.value.headers,(s,v)=>(d(),r("div",{key:v,class:"flex gap-2"},[o(n(b),{modelValue:s.key,"onUpdate:modelValue":m=>s.key=m,placeholder:"Content-Type",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),o(n(b),{modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,placeholder:"application/json",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),o(n(g),{onClick:m=>H(v),icon:"pi pi-trash",severity:"danger",text:"",size:"small"},null,8,["onClick"])]))),128)),o(n(g),{onClick:C,icon:"pi pi-plus",label:"Agregar Header",severity:"secondary",text:"",size:"small"})])]),U.value?(d(),r("div",ve,[e[19]||(e[19]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-file-edit mr-2"}),c(" Body ")],-1)),l("div",ye,[o(n(_),{modelValue:t.value.bodyType,"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.bodyType=s),options:j,optionLabel:"label",optionValue:"value",placeholder:"JSON",class:"w-full"},null,8,["modelValue"]),o(n(ee),{modelValue:t.value.body,"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.body=s),class:"w-full",rows:8,placeholder:'{"key": "value"}'},null,8,["modelValue"])])])):h("",!0),l("div",null,[e[20]||(e[20]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-lock mr-2"}),c(" Autenticación ")],-1)),o(n(_),{modelValue:t.value.auth.type,"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.auth.type=s),options:D,optionLabel:"label",optionValue:"value",placeholder:"Sin autenticación",class:"w-full mb-3"},null,8,["modelValue"]),t.value.auth.type==="basic"?(d(),r("div",be,[o(n(b),{modelValue:t.value.auth.username,"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.auth.username=s),placeholder:"Usuario",class:"w-full"},null,8,["modelValue"]),o(n(le),{modelValue:t.value.auth.password,"onUpdate:modelValue":e[7]||(e[7]=s=>t.value.auth.password=s),placeholder:"Contraseña",class:"w-full",feedback:!1},null,8,["modelValue"])])):h("",!0),t.value.auth.type==="bearer"?(d(),r("div",xe,[o(n(b),{modelValue:t.value.auth.token,"onUpdate:modelValue":e[8]||(e[8]=s=>t.value.auth.token=s),placeholder:"Token Bearer",class:"w-full"},null,8,["modelValue"])])):h("",!0),t.value.auth.type==="apikey"?(d(),r("div",fe,[o(n(b),{modelValue:t.value.auth.key,"onUpdate:modelValue":e[9]||(e[9]=s=>t.value.auth.key=s),placeholder:"Nombre del header (ej: X-API-Key)",class:"w-full"},null,8,["modelValue"]),o(n(b),{modelValue:t.value.auth.value,"onUpdate:modelValue":e[10]||(e[10]=s=>t.value.auth.value=s),placeholder:"Valor de la API Key",class:"w-full"},null,8,["modelValue"])])):h("",!0)]),o(n(g),{type:"submit",label:"Enviar Request",class:"w-full bg-blue-600 border-blue-600 hover:bg-blue-700 hover:border-blue-700",loading:T.value},{icon:f(()=>e[21]||(e[21]=[l("i",{class:"pi pi-send mr-2"},null,-1)])),_:1},8,["loading"])],32)]),l("div",null,[e[22]||(e[22]=l("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[l("i",{class:"pi pi-history text-green-600"}),c(" Historial de Requests ")],-1)),l("div",he,[(d(!0),r(V,null,w(x.value,(s,v)=>(d(),r("div",{key:v,onClick:m=>$(s),class:"p-3 border rounded cursor-pointer hover:bg-gray-50 transition-colors"},[l("div",ke,[l("span",Te,y(s.method),1),l("span",Ve,y(s.url),1)]),l("div",we,y(new Date(s.timestamp).toLocaleString()),1)],8,ge))),128)),x.value.length===0?(d(),r("div",_e," No hay requests en el historial ")):h("",!0)])])])]),_:1}),o(n(R),null,{title:f(()=>e[23]||(e[23]=[l("h2",{class:"text-xl font-semibold text-gray-800 flex items-center justify-center gap-2"},[l("i",{class:"pi pi-chart-line text-green-600"}),c(" Respuesta del API ")],-1)])),content:f(()=>[i.value?(d(),r("div",Ue,[l("div",Ce,[l("div",Ee,[l("span",{class:Y(["px-3 py-1 rounded-full text-sm font-semibold",B(i.value.status)])},y(i.value.status),3),l("span",Ae,y(i.value.statusText),1)]),l("div",Pe,y(i.value.time)+"ms",1)]),l("div",Se,[l("div",null,[e[24]||(e[24]=l("h3",{class:"font-semibold text-gray-800 mb-2"}," Headers de Respuesta ",-1)),l("div",Re,[(d(!0),r(V,null,w(i.value.headers,(s,v)=>(d(),r("div",{key:v,class:"text-sm font-mono"},[l("span",Oe,y(v)+":",1),l("span",je,y(s),1)]))),128))])]),l("div",null,[l("div",De,[e[25]||(e[25]=l("h3",{class:"font-semibold text-gray-800"},"Body de Respuesta",-1)),l("div",He,[o(n(g),{onClick:I,icon:"pi pi-copy",label:"Copiar",severity:"secondary",text:"",size:"small"}),o(n(g),{onClick:q,icon:"pi pi-download",label:"Descargar",severity:"secondary",text:"",size:"small"})])]),l("div",Be,[l("pre",Ne,y(N(i.value.body)),1)])])])])):(d(),r("div",Le,e[26]||(e[26]=[l("i",{class:"pi pi-globe text-4xl mb-4"},null,-1),l("p",null,"Envía un request para ver la respuesta aquí",-1)])))]),_:1})])])}}});export{ze as default};
