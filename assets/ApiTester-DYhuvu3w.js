import{P as W,r as T,L as X,o as Q,c as d,e as l,x as s,B as u,A as v,f as Y,J as Z,j as _,R as a,F as w,i as U,p as ee,t as x,d as p}from"./vue-vendor-DSKsDytq.js";import{x as c,y as m,B as g,n as C,z as le,a as k,j as te,G as se,l as D}from"./primevue-CM4O-dLP.js";const ae={class:"bg-gray-100 py-2 px-4 rounded-md shadow-sm mb-6"},oe={class:"text-sm","aria-label":"Miga de pan"},ue={class:"list-none p-0 inline-flex space-x-2"},ne={class:"flex items-center"},ie={class:"max-w-7xl mx-auto px-4 py-4"},re={class:"grid md:grid-cols-2 gap-6"},de={class:"space-y-4"},pe={class:"space-y-3"},me={class:"flex gap-2"},ve={class:"flex-1"},ce={class:"flex-1"},ye={class:"space-y-2"},fe={key:0},be={class:"space-y-2"},xe={key:0,class:"space-y-2"},ge={key:1,class:"space-y-2"},he={key:2,class:"space-y-2"},_e={class:"space-y-2 max-h-96 overflow-y-auto"},ke=["onClick"],Te={class:"flex items-center justify-between"},Ve={class:"font-mono text-sm font-semibold"},we={class:"text-xs text-gray-500 truncate"},Ue={class:"text-xs text-gray-600 mt-1"},Ce={key:0,class:"text-center text-gray-500 text-sm py-4"},Ee={key:0,class:"space-y-4"},Pe={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},Ae={class:"flex items-center gap-3"},Re={class:"text-sm text-gray-600"},Se={class:"text-sm text-gray-500"},je={class:"grid md:grid-cols-2 gap-6"},De={class:"bg-gray-50 p-3 rounded-lg max-h-60 overflow-y-auto"},He={class:"text-blue-600"},Oe={class:"text-gray-700 ml-2"},Be={class:"flex items-center justify-between mb-2"},Le={class:"flex gap-2"},Ne={class:"bg-gray-900 text-green-400 p-4 rounded-lg max-h-60 overflow-y-auto"},$e={class:"text-sm"},Ie={key:1,class:"text-center text-gray-500 py-8"},Fe=W({__name:"ApiTester",setup(qe){const t=T({url:"",method:"GET",timeout:5e3,headers:[],body:"",bodyType:"json",auth:{type:"none"}}),r=T(null),V=T(!1),h=T([]),H=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"},{label:"DELETE",value:"DELETE"},{label:"HEAD",value:"HEAD"},{label:"OPTIONS",value:"OPTIONS"}],O=[{label:"JSON",value:"json"},{label:"Form Data",value:"form"},{label:"XML",value:"xml"},{label:"Text",value:"text"}],B=[{label:"Sin autenticación",value:"none"},{label:"Basic Auth",value:"basic"},{label:"Bearer Token",value:"bearer"},{label:"API Key",value:"apikey"}],E=X(()=>["POST","PUT","PATCH"].includes(t.value.method)),P=()=>{t.value.headers.push({key:"",value:""})},L=n=>{t.value.headers.splice(n,1)},N=n=>n>=200&&n<300?"bg-green-100 text-green-800":n>=300&&n<400?"bg-blue-100 text-blue-800":n>=400&&n<500?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",$=n=>{try{return n.startsWith("{")||n.startsWith("[")?JSON.stringify(JSON.parse(n),null,2):n}catch{return n}},I=async()=>{if(!t.value.url)return;V.value=!0;const n=Date.now();try{const e={};if(t.value.headers.forEach(y=>{y.key&&y.value&&(e[y.key]=y.value)}),t.value.auth.type==="basic"&&t.value.auth.username&&t.value.auth.password){const y=btoa(`${t.value.auth.username}:${t.value.auth.password}`);e.Authorization=`Basic ${y}`}else t.value.auth.type==="bearer"&&t.value.auth.token?e.Authorization=`Bearer ${t.value.auth.token}`:t.value.auth.type==="apikey"&&t.value.auth.key&&t.value.auth.value&&(e[t.value.auth.key]=t.value.auth.value);let i=null;if(E.value&&t.value.body)if(t.value.bodyType==="json")try{i=JSON.parse(t.value.body),e["Content-Type"]="application/json"}catch{i=t.value.body}else if(t.value.bodyType==="form"){const y=new FormData;t.value.body.split(`
`).forEach(K=>{const[S,j]=K.split("=");S&&j&&y.append(S.trim(),j.trim())}),i=y}else i=t.value.body,e["Content-Type"]=t.value.bodyType==="xml"?"application/xml":"text/plain";const o=new AbortController,b=setTimeout(()=>o.abort(),t.value.timeout),f=await fetch(t.value.url,{method:t.value.method,headers:e,body:i instanceof FormData?i:i?JSON.stringify(i):void 0,signal:o.signal});clearTimeout(b);const F=await f.text(),A={};f.headers.forEach((y,R)=>{A[R]=y});const M=Date.now();r.value={status:f.status,statusText:f.statusText,headers:A,body:F,time:M-n};const G={...t.value,timestamp:Date.now(),response:r.value};h.value.unshift(G),h.value.length>10&&(h.value=h.value.slice(0,10))}catch(e){const i=Date.now();r.value={status:0,statusText:"Error",headers:{},body:e.message||"Error de red",time:i-n}}finally{V.value=!1}},q=n=>{t.value={...n},n.response&&(r.value=n.response)},z=()=>{r.value&&navigator.clipboard.writeText(r.value.body)},J=()=>{if(r.value){const n=new Blob([r.value.body],{type:"text/plain"}),e=URL.createObjectURL(n),i=document.createElement("a");i.href=e,i.download="response.txt",i.click(),URL.revokeObjectURL(e)}};return Q(()=>{P()}),(n,e)=>{const i=Y("router-link");return p(),d("div",null,[l("div",ae,[l("nav",oe,[l("ol",ue,[l("li",ne,[s(i,{to:"/",class:"text-blue-500 hover:text-blue-700"},{default:u(()=>e[11]||(e[11]=[l("i",{class:"pi pi-home mr-1"},null,-1),v(" Herramientas ")])),_:1,__:[11]})]),e[12]||(e[12]=l("li",null,[l("i",{class:"pi pi-chevron-right text-gray-400"})],-1)),e[13]||(e[13]=l("li",{class:"text-gray-700"},"API Tester",-1))])])]),l("div",ie,[e[40]||(e[40]=l("div",{class:"text-center mb-8"},[l("h1",{class:"text-3xl font-bold text-gray-800 mb-2"},[l("i",{class:"pi pi-globe mr-3 text-blue-600"}),v(" API Tester ")]),l("p",{class:"text-gray-600"}," Prueba APIs REST con diferentes métodos HTTP, headers y autenticación ")],-1)),s(a(D),{class:"mb-6"},{title:u(()=>e[14]||(e[14]=[l("h2",{class:"text-xl font-semibold text-gray-800 flex items-center justify-center gap-2"},[l("i",{class:"pi pi-cog text-blue-600"}),v(" Configuración del Request ")],-1)])),content:u(()=>[l("div",re,[l("div",de,[l("form",{onSubmit:Z(I,["prevent"]),class:"space-y-4"},[l("div",pe,[l("div",null,[e[16]||(e[16]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-link mr-2"}),v(" URL ")],-1)),s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[15]||(e[15]=[l("i",{class:"pi pi-link"},null,-1)])),_:1,__:[15]}),s(a(g),{modelValue:t.value.url,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.url=o),class:"w-full",placeholder:"https://api.example.com/endpoint",required:""},null,8,["modelValue"])]),_:1})])]),l("div",me,[l("div",ve,[e[18]||(e[18]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-arrow-right mr-2"}),v(" Método ")],-1)),s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[17]||(e[17]=[l("i",{class:"pi pi-arrow-right"},null,-1)])),_:1,__:[17]}),s(a(C),{modelValue:t.value.method,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.method=o),options:H,optionLabel:"label",optionValue:"value",placeholder:"GET",class:"w-full"},null,8,["modelValue"])]),_:1})]),l("div",ce,[e[21]||(e[21]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-clock mr-2"}),v(" Timeout ")],-1)),s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[19]||(e[19]=[l("i",{class:"pi pi-clock"},null,-1)])),_:1,__:[19]}),s(a(le),{modelValue:t.value.timeout,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.timeout=o),class:"w-full",min:1e3,max:6e4,step:1e3,placeholder:"5000"},null,8,["modelValue"]),s(a(m),null,{default:u(()=>e[20]||(e[20]=[v("ms")])),_:1,__:[20]})]),_:1})])]),l("div",null,[e[24]||(e[24]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-list mr-2"}),v(" Headers ")],-1)),l("div",ye,[(p(!0),d(w,null,U(t.value.headers,(o,b)=>(p(),d("div",{key:b,class:"flex gap-2"},[s(a(c),{class:"flex-1"},{default:u(()=>[s(a(m),null,{default:u(()=>e[22]||(e[22]=[l("i",{class:"pi pi-tag"},null,-1)])),_:1,__:[22]}),s(a(g),{modelValue:o.key,"onUpdate:modelValue":f=>o.key=f,placeholder:"Content-Type",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(a(c),{class:"flex-1"},{default:u(()=>[s(a(m),null,{default:u(()=>e[23]||(e[23]=[l("i",{class:"pi pi-angle-right"},null,-1)])),_:1,__:[23]}),s(a(g),{modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,placeholder:"application/json",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(a(k),{onClick:f=>L(b),icon:"pi pi-trash",severity:"danger",text:"",size:"small"},null,8,["onClick"])]))),128)),s(a(k),{onClick:P,icon:"pi pi-plus",label:"Agregar Header",severity:"secondary",text:"",size:"small"})])]),E.value?(p(),d("div",fe,[e[26]||(e[26]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-file-edit mr-2"}),v(" Body ")],-1)),l("div",be,[s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[25]||(e[25]=[l("i",{class:"pi pi-file-edit"},null,-1)])),_:1,__:[25]}),s(a(C),{modelValue:t.value.bodyType,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.bodyType=o),options:O,optionLabel:"label",optionValue:"value",placeholder:"JSON",class:"w-full"},null,8,["modelValue"])]),_:1}),s(a(te),{modelValue:t.value.body,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.body=o),class:"w-full",rows:8,placeholder:'{"key": "value"}'},null,8,["modelValue"])])])):_("",!0),l("div",null,[e[33]||(e[33]=l("label",{class:"block mb-2 font-medium text-gray-700"},[l("i",{class:"pi pi-lock mr-2"}),v(" Autenticación ")],-1)),s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[27]||(e[27]=[l("i",{class:"pi pi-lock"},null,-1)])),_:1,__:[27]}),s(a(C),{modelValue:t.value.auth.type,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.auth.type=o),options:B,optionLabel:"label",optionValue:"value",placeholder:"Sin autenticación",class:"w-full mb-3"},null,8,["modelValue"])]),_:1}),t.value.auth.type==="basic"?(p(),d("div",xe,[s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[28]||(e[28]=[l("i",{class:"pi pi-user"},null,-1)])),_:1,__:[28]}),s(a(g),{modelValue:t.value.auth.username,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.auth.username=o),placeholder:"Usuario",class:"w-full"},null,8,["modelValue"])]),_:1}),s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[29]||(e[29]=[l("i",{class:"pi pi-key"},null,-1)])),_:1,__:[29]}),s(a(se),{modelValue:t.value.auth.password,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.auth.password=o),placeholder:"Contraseña",class:"w-full",feedback:!1},null,8,["modelValue"])]),_:1})])):_("",!0),t.value.auth.type==="bearer"?(p(),d("div",ge,[s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[30]||(e[30]=[l("i",{class:"pi pi-key"},null,-1)])),_:1,__:[30]}),s(a(g),{modelValue:t.value.auth.token,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.auth.token=o),placeholder:"Token Bearer",class:"w-full"},null,8,["modelValue"])]),_:1})])):_("",!0),t.value.auth.type==="apikey"?(p(),d("div",he,[s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[31]||(e[31]=[l("i",{class:"pi pi-tag"},null,-1)])),_:1,__:[31]}),s(a(g),{modelValue:t.value.auth.key,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.auth.key=o),placeholder:"Nombre del header (ej: X-API-Key)",class:"w-full"},null,8,["modelValue"])]),_:1}),s(a(c),null,{default:u(()=>[s(a(m),null,{default:u(()=>e[32]||(e[32]=[l("i",{class:"pi pi-key"},null,-1)])),_:1,__:[32]}),s(a(g),{modelValue:t.value.auth.value,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.auth.value=o),placeholder:"Valor de la API Key",class:"w-full"},null,8,["modelValue"])]),_:1})])):_("",!0)]),s(a(k),{type:"submit",label:"Enviar Request",class:"w-full bg-blue-600 border-blue-600 hover:bg-blue-700 hover:border-blue-700",loading:V.value},{icon:u(()=>e[34]||(e[34]=[l("i",{class:"pi pi-send mr-2"},null,-1)])),_:1},8,["loading"])],32)]),l("div",null,[e[35]||(e[35]=l("h3",{class:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2"},[l("i",{class:"pi pi-history text-green-600"}),v(" Historial de Requests ")],-1)),l("div",_e,[(p(!0),d(w,null,U(h.value,(o,b)=>(p(),d("div",{key:b,onClick:f=>q(o),class:"p-3 border rounded cursor-pointer hover:bg-gray-50 transition-colors"},[l("div",Te,[l("span",Ve,x(o.method),1),l("span",we,x(o.url),1)]),l("div",Ue,x(new Date(o.timestamp).toLocaleString()),1)],8,ke))),128)),h.value.length===0?(p(),d("div",Ce," No hay requests en el historial ")):_("",!0)])])])]),_:1}),s(a(D),null,{title:u(()=>e[36]||(e[36]=[l("h2",{class:"text-xl font-semibold text-gray-800 flex items-center justify-center gap-2"},[l("i",{class:"pi pi-chart-line text-green-600"}),v(" Respuesta del API ")],-1)])),content:u(()=>[r.value?(p(),d("div",Ee,[l("div",Pe,[l("div",Ae,[l("span",{class:ee(["px-3 py-1 rounded-full text-sm font-semibold",N(r.value.status)])},x(r.value.status),3),l("span",Re,x(r.value.statusText),1)]),l("div",Se,x(r.value.time)+"ms",1)]),l("div",je,[l("div",null,[e[37]||(e[37]=l("h3",{class:"font-semibold text-gray-800 mb-2"}," Headers de Respuesta ",-1)),l("div",De,[(p(!0),d(w,null,U(r.value.headers,(o,b)=>(p(),d("div",{key:b,class:"text-sm font-mono"},[l("span",He,x(b)+":",1),l("span",Oe,x(o),1)]))),128))])]),l("div",null,[l("div",Be,[e[38]||(e[38]=l("h3",{class:"font-semibold text-gray-800"},"Body de Respuesta",-1)),l("div",Le,[s(a(k),{onClick:z,icon:"pi pi-copy",label:"Copiar",severity:"secondary",text:"",size:"small"}),s(a(k),{onClick:J,icon:"pi pi-download",label:"Descargar",severity:"secondary",text:"",size:"small"})])]),l("div",Ne,[l("pre",$e,x($(r.value.body)),1)])])])])):(p(),d("div",Ie,e[39]||(e[39]=[l("i",{class:"pi pi-globe text-4xl mb-4"},null,-1),l("p",null,"Envía un request para ver la respuesta aquí",-1)])))]),_:1})])])}}});export{Fe as default};
