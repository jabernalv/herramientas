import{P as y,r as p,o as L,w as I,c as u,e as r,x as o,j as m,R as l,H as k,t as x,B as b,F as V,i as j,d as i,k as B,p as S}from"./vue-vendor-DSKsDytq.js";import{A as N,B as q,z as A,a as g,i as D}from"./primevue-Cz0MYcUz.js";import{C as E,D as $}from"./vue3-smooth-dnd.esm-DyDYc-3R.js";import{_ as z}from"./index-C9Un_TOC.js";const U={class:"container mx-auto p-4 max-w-md"},F={class:"bg-white p-6 rounded-lg shadow-md mb-6"},J={class:"flex items-center"},K={key:0,class:"text-red-500 text-sm mt-2"},O={key:0,class:"bg-white p-6 rounded-lg shadow-md text-center text-gray-500"},H={class:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-between"},M={class:"flex items-center flex-grow"},P={key:1,class:"mt-6 text-center"},T=y({__name:"BuyList",setup(G){const t=p([]),c=p(""),d=p(""),v=N();L(()=>{const a=localStorage.getItem("shoppingList");a&&(t.value=JSON.parse(a))});const n=()=>{localStorage.setItem("shoppingList",JSON.stringify(t.value))};I(t,n,{deep:!0});const f=()=>{const a=c.value.trim();if(a===""){d.value="El nombre del artículo no puede estar vacío.";return}if(t.value.some(s=>s.name.toLowerCase()===a.toLowerCase())){d.value="Este artículo ya está en tu lista.";return}const e={id:Date.now(),name:a,bought:!1};t.value.push(e),c.value="",d.value="",n()},_=a=>{v.require({message:"¿Seguro que deseas eliminar este artículo?",header:"Confirmar eliminación",icon:"pi pi-exclamation-triangle",acceptLabel:"Sí, eliminar",rejectLabel:"Cancelar",acceptIcon:"pi pi-trash",rejectIcon:"pi pi-times-circle",acceptClass:"p-button-danger",rejectClass:"p-button-warning",accept:()=>{t.value=t.value.filter(e=>e.id!==a),n()}})},w=()=>{v.require({message:"¿Estás seguro de que quieres limpiar toda la lista?",header:"Confirmar limpieza",icon:"pi pi-exclamation-triangle",acceptLabel:"Sí, limpiar",rejectLabel:"Cancelar",acceptIcon:"pi pi-trash",rejectIcon:"pi pi-times-circle",acceptClass:"p-button-danger",rejectClass:"p-button-warning",accept:()=>{t.value=[],n()}})};function C(a){if(!a||a.removedIndex===null&&a.addedIndex===null)return;const e=[...t.value],[s]=e.splice(a.removedIndex,1);e.splice(a.addedIndex,0,s),t.value=e,n()}return(a,e)=>(i(),u("div",U,[e[3]||(e[3]=r("h1",{class:"text-3xl font-bold text-center text-gray-800 mb-6"}," 🛒 Lista de compras 🛒 ",-1)),o(l(q)),r("div",F,[r("div",J,[o(l(A),{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),onKeyup:k(f,["enter"]),placeholder:"Escribe un nuevo artículo...",class:"flex-grow rounded-l-md p-3 border-none focus:ring-2 focus:ring-blue-500"},null,8,["modelValue"]),o(l(g),{onClick:f,disabled:!c.value.trim(),label:"Agregar",icon:"pi pi-plus",class:"rounded-r-md ml-0"},null,8,["disabled"])]),d.value?(i(),u("p",K,x(d.value),1)):m("",!0)]),t.value.length===0?(i(),u("div",O,e[1]||(e[1]=[r("p",null,"¡Tu lista de compras está vacía! Añade algunos artículos.",-1)]))):m("",!0),o(l(E),{tag:"ul",class:"space-y-3","drag-handle-selector":".drag-handle",onDrop:C},{default:b(()=>[(i(!0),u(V,null,j(t.value,s=>(i(),B(l($),{key:s.id},{default:b(()=>[r("li",H,[r("div",M,[e[2]||(e[2]=r("span",{class:"drag-handle cursor-move text-gray-400 hover:text-blue-500 transition mr-2",title:"Arrastrar para reordenar"},[r("i",{class:"pi pi-bars"})],-1)),o(l(D),{modelValue:s.bought,"onUpdate:modelValue":h=>s.bought=h,onChange:n,class:"mr-3",binary:!0},null,8,["modelValue","onUpdate:modelValue"]),r("span",{class:S([{"line-through text-gray-500":s.bought,"text-gray-800":!s.bought},"text-lg flex-grow"])},x(s.name),3)]),o(l(g),{onClick:h=>_(s.id),icon:"pi pi-trash",severity:"danger",class:"ml-4",text:""},null,8,["onClick"])])]),_:2},1024))),128))]),_:1}),t.value.length>0?(i(),u("div",P,[o(l(g),{onClick:w,label:"Limpiar Lista",icon:"pi pi-trash",severity:"danger"})])):m("",!0)]))}}),Z=z(T,[["__scopeId","data-v-6ffaa516"]]);export{Z as default};
