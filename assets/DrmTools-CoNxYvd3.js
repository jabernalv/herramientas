import{u as X,f as k,g as I,k as C,a as n,m as h}from"./primevue-DrPXlnFP.js";import{_ as O}from"./BreadcrumbNav.vue_vue_type_script_setup_true_lang-C1ElsLfU.js";import{S as q,L as z,a as G,f as J,_ as Q}from"./index-C99OtVWq.js";import{H as Z}from"./hash-DS_U4Z-i.js";import{P as ee,r as g,c as D,x as t,e as l,B as r,R as o,d as E,j as V,A as w,t as B,l as P,h as se}from"./vue-vendor-D8N656sj.js";const le={class:"min-h-screen mb-16"},te={class:"container mx-auto px-4 sm:px-6 lg:px-8"},oe={class:"w-full sm:w-4/5 mx-auto grid grid-cols-1 sm:grid-cols-2 gap-4"},ae={class:"space-y-4"},re={class:"flex gap-2"},ie={key:0,class:"surface-ground border-round p-3"},de={class:"mb-2"},ne={class:"mb-2"},ce={class:"mb-2"},ue={key:0,class:"space-y-4"},pe={class:"flex items-center gap-2"},fe={class:"bg-surface-200 p-1 rounded flex-grow font-mono text-sm"},me={class:"flex items-center gap-2"},ye={class:"bg-surface-200 p-1 rounded flex-grow font-mono text-sm"},ve={class:"space-y-4"},be={class:"flex gap-2"},xe={key:0},ge={class:"space-y-4"},we={class:"flex gap-2"},Se={key:0},ke=ee({__name:"DrmTools",setup(Ie){const f=X(),u=g(""),y=g(""),v=g(""),d=g(null),m=g(""),b=g(""),H={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed",PLAYREADY:"9a04f07998404286ab92e65be0885f95",FAIRPLAY:"94ce86fb07ff4f43adb893d2fa968ca2"},A=s=>Array.from(s).map(e=>e.toString(16).padStart(2,"0")).join(""),F=()=>{try{if(!u.value)return;const s=atob(u.value),e=new Uint8Array(s.length);for(let S=0;S<s.length;S++)e[S]=s.charCodeAt(S);if(A(e.slice(4,8))!=="70737368")throw new Error("Formato PSSH inválido: header incorrecto");const a=e[8],c=A(e.slice(12,28));let p="Desconocido";c===H.WIDEVINE?p="Widevine":c===H.PLAYREADY?p="PlayReady":c===H.FAIRPLAY&&(p="FairPlay");let _="",N="";if(p==="Widevine"&&a===0){const R=e.slice(34,50);_=A(R),N=btoa(String.fromCharCode.apply(null,[...R]))}d.value={systemId:c,systemName:p,version:a,keyId:_,keyIdBase64:N},f.add({severity:"success",summary:"Éxito",detail:"PSSH decodificado correctamente",life:3e3})}catch(s){f.add({severity:"error",summary:"Error",detail:s instanceof Error?s.message:"Error al decodificar PSSH",life:3e3})}},T=s=>{const e=[];for(let i=0;i<s.length;i+=2)e.push(parseInt(s.slice(i,i+2),16));return e},U=(...s)=>s.flat(),$=s=>{s=s.replace(/=+$/,"");const e=atob(s);let i="";for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);i+=c.toString(16).padStart(2,"0")}return i},K=s=>/^[0-9a-f]{32}$/.test(s),L=s=>{try{return s=s.replace(/=+$/,""),atob(s).length===16}catch{return!1}},Y=()=>{try{if(!y.value)return;let s=y.value.trim().replace(/-/g,"");if(K(s.toLowerCase()))s=s.toLowerCase();else if(L(s))s=$(s);else throw new Error("El KeyID debe ser una cadena hexadecimal de 32 caracteres o un Base64 válido que represente 16 bytes.");const e=[0,0,0,50,112,115,115,104,0,0,0,0],i=T("edef8ba979d64acea3c827dcd51d21ed"),a=[0,0,0,18,18,16],c=T(s),p=U(e,i,a,c);v.value=btoa(String.fromCharCode.apply(null,p)),f.add({severity:"success",summary:"Éxito",detail:"PSSH codificado correctamente",life:3e3})}catch(s){f.add({severity:"error",summary:"Error",detail:s instanceof Error?s.message:"Error al codificar PSSH",life:3e3})}},x=async s=>{try{await navigator.clipboard.writeText(s),f.add({severity:"success",summary:"Copiado",detail:"Texto copiado al portapapeles",life:3e3})}catch{f.add({severity:"error",summary:"Error",detail:"Error al copiar al portapapeles",life:3e3})}},j=()=>{u.value="",d.value=null},M=()=>{y.value="",v.value=""};function W(){try{if(!m.value)return;if(!/^(0x[0-9a-fA-F]{2})(,0x[0-9a-fA-F]{2})*$/.test(m.value.trim()))throw new Error("Formato inválido. Usa solo bytes hexadecimales con prefijo 0x, separados por coma. Ejemplo: 0x7b,0x22,0x6b,0x65");const i=m.value.trim().split(",").map(p=>parseInt(p,16)),c=new TextDecoder("utf-8").decode(new Uint8Array(i));b.value=c,f.add({severity:"success",summary:"Éxito",detail:"Decodificado correctamente",life:3e3})}catch(s){b.value="",f.add({severity:"error",summary:"Error",detail:s instanceof Error?s.message:"Error al decodificar los bytes",life:3e3})}}return(s,e)=>{const i=se("tooltip");return E(),D("div",le,[t(O),l("div",te,[e[27]||(e[27]=l("header",{class:"text-center mb-8"},[l("h1",{class:"text-4xl font-extrabold text-primary-700 mb-2"},"DRM Tools")],-1)),l("div",oe,[t(o(h),{class:"w-full"},{title:r(()=>e[11]||(e[11]=[l("div",{class:"flex items-center gap-2"},[l("i",{class:"pi pi-lock-open"}),l("span",null,"Decodificar PSSH")],-1)])),subtitle:r(()=>e[12]||(e[12]=[w("Decodifica un PSSH de formato Base64 ")])),content:r(()=>[l("div",ae,[l("div",null,[e[13]||(e[13]=l("label",{class:"block mb-2"},"PSSH Base64",-1)),t(o(k),null,{default:r(()=>[t(o(I),null,{default:r(()=>[t(o(q),{class:"w-4 h-4"})]),_:1}),t(o(C),{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),rows:"3",class:"w-full",placeholder:"Ingrese el PSSH en formato Base64"},null,8,["modelValue"])]),_:1})]),l("div",re,[t(o(n),{label:"Decodificar",icon:"pi pi-arrow-right",class:"p-button-success flex-grow",onClick:F,disabled:!u.value},null,8,["disabled"]),t(o(n),{icon:"pi pi-copy",class:"p-button-outlined",onClick:e[1]||(e[1]=()=>x(u.value)),disabled:!u.value},null,8,["disabled"]),t(o(n),{icon:"pi pi-trash",severity:"danger",onClick:j,disabled:!u.value&&!d.value},null,8,["disabled"])]),d.value?(E(),D("div",ie,[l("p",de,[e[14]||(e[14]=l("strong",null,"Sistema DRM:",-1)),w(" "+B(d.value.systemName),1)]),l("p",ne,[e[15]||(e[15]=l("strong",null,"System ID:",-1)),w(" "+B(d.value.systemId),1)]),l("p",ce,[e[16]||(e[16]=l("strong",null,"Versión:",-1)),w(" "+B(d.value.version),1)]),d.value.keyId?(E(),D("div",ue,[l("div",null,[e[17]||(e[17]=l("p",{class:"font-bold mb-2"},"Key ID (HEX):",-1)),l("div",pe,[l("code",fe,B(d.value.keyId),1),P(t(o(n),{icon:"pi pi-copy",class:"p-button-text p-button-sm",onClick:e[2]||(e[2]=()=>x(d.value.keyId))},null,512),[[i,"Copiar Key ID (HEX)",void 0,{top:!0}]])])]),l("div",null,[e[18]||(e[18]=l("p",{class:"font-bold mb-2"},"Key ID (Base64):",-1)),l("div",me,[l("code",ye,B(d.value.keyIdBase64),1),P(t(o(n),{icon:"pi pi-copy",class:"p-button-text p-button-sm",onClick:e[3]||(e[3]=()=>x(d.value.keyIdBase64))},null,512),[[i,"Copiar Key ID (Base64)",void 0,{top:!0}]])])])])):V("",!0)])):V("",!0)])]),_:1}),t(o(h),{class:"w-full"},{title:r(()=>e[19]||(e[19]=[l("div",{class:"flex items-center gap-2"},[l("i",{class:"pi pi-lock"}),l("span",null,"Codificar PSSH")],-1)])),subtitle:r(()=>e[20]||(e[20]=[w(" Codifica un Key ID en formato PSSH Base64 ")])),content:r(()=>[l("div",ve,[l("div",null,[e[21]||(e[21]=l("label",{class:"block mb-2"},"Texto a codificar",-1)),t(o(k),null,{default:r(()=>[t(o(I),null,{default:r(()=>[t(o(z),{class:"w-4 h-4"})]),_:1}),t(o(C),{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=a=>y.value=a),rows:"3",class:"w-full",placeholder:"Ingrese el Key ID en HEX (32 caracteres) o Base64 (22-24 caracteres)"},null,8,["modelValue"])]),_:1})]),l("div",be,[t(o(n),{label:"Codificar",icon:"pi pi-arrow-right",class:"p-button-success flex-grow",onClick:Y,disabled:!y.value},null,8,["disabled"]),t(o(n),{icon:"pi pi-trash",severity:"danger",onClick:M,disabled:!y.value&&!v.value},null,8,["disabled"])]),v.value?(E(),D("div",xe,[e[22]||(e[22]=l("label",{class:"block mb-2"},"Resultado en Base64",-1)),t(o(k),null,{default:r(()=>[t(o(I),null,{default:r(()=>[t(o(G),{class:"w-4 h-4"})]),_:1}),t(o(C),{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=a=>v.value=a),rows:"3",class:"w-full mb-2",readonly:""},null,8,["modelValue"])]),_:1}),t(o(n),{icon:"pi pi-copy",label:"Copiar resultado",class:"p-button-outlined w-full",onClick:e[6]||(e[6]=()=>x(v.value))})])):V("",!0)])]),_:1}),t(o(h),{class:"w-full mt-4"},{title:r(()=>e[23]||(e[23]=[l("div",{class:"flex items-center gap-2"},[l("i",{class:"pi pi-code"}),l("span",null,"Decodificar bytes hex a texto")],-1)])),subtitle:r(()=>e[24]||(e[24]=[w(" Convierte una secuencia de bytes en formato 0xNN,0xNN,... a texto legible (UTF-8) ")])),content:r(()=>[l("div",ge,[l("div",null,[e[25]||(e[25]=l("label",{class:"block mb-2"},"Bytes hexadecimales",-1)),t(o(k),null,{default:r(()=>[t(o(I),null,{default:r(()=>[t(o(J),{class:"w-4 h-4"})]),_:1}),t(o(C),{modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=a=>m.value=a),rows:"3",class:"w-full",placeholder:"Ejemplo: 0x7b,0x22,0x6b,0x65,0x79,0x73,0x22,0x3a,0x5b,0x7b,0x22,0x6b,0x74,0x79,0x22,0x3a,0x22,0x6f,0x63,0x74,0x22"},null,8,["modelValue"])]),_:1})]),l("div",we,[t(o(n),{label:"Decodificar",icon:"pi pi-arrow-right",class:"p-button-success flex-grow",onClick:W,disabled:!m.value},null,8,["disabled"]),P(t(o(n),{icon:"pi pi-copy",class:"p-button-outlined",onClick:e[8]||(e[8]=()=>x(m.value)),disabled:!m.value},null,8,["disabled"]),[[i,"Copiar entrada",void 0,{top:!0}]])]),b.value?(E(),D("div",Se,[e[26]||(e[26]=l("label",{class:"block mb-2"},"Texto decodificado",-1)),t(o(k),null,{default:r(()=>[t(o(I),null,{default:r(()=>[t(o(Z),{class:"w-4 h-4"})]),_:1}),t(o(C),{modelValue:b.value,"onUpdate:modelValue":e[9]||(e[9]=a=>b.value=a),rows:"3",class:"w-full mb-2",readonly:""},null,8,["modelValue"])]),_:1}),t(o(n),{icon:"pi pi-copy",label:"Copiar resultado",class:"p-button-outlined w-full",onClick:e[10]||(e[10]=()=>x(b.value))})])):V("",!0)])]),_:1})])])])}}}),He=Q(ke,[["__scopeId","data-v-fb34518f"]]);export{He as default};
