import{u as P,g as C,k as Z,f as h,D,h as Q,i as z,a as f}from"./primevue-CTM77RMy.js";import{D as J,a as K,b as W,c as Y,d as ee,M as c,e as le,h as V,f as ae,E as te,g as oe,i as se,j as re,k as ie,r as ne,l as A}from"./qrCodeCommonFunctions-BvzLY-jy.js";import{Q as U,P as L,_ as de}from"./index-BbAnu8e5.js";import{S as ue}from"./settings-Cct2SvUa.js";import{I as ce}from"./image-B6xDqkhB.js";import{R as me}from"./refresh-cw-DddArQdn.js";import{C as pe}from"./copy-Q45y3h1A.js";import{D as ve}from"./download-Bx4kx5V9.js";import{M as fe}from"./minus-CVqh9fiw.js";import{P as ge}from"./plus-DICSOiCt.js";import{P as xe,r as d,w as R,o as _e,c as F,x as l,e as o,B as i,R as e,p as we,j as be,A as ye,t as g,l as M,k as O,d as E,s as q,h as Ce}from"./vue-vendor-ByoO1CXK.js";import"./_commonjsHelpers-D6-XlEtG.js";const he={class:"space-y-4"},Re={class:"w-full flex justify-end"},Se={key:0,class:"mr-2",role:"img","aria-label":"advertencia"},Ve={class:"w-full bg-white rounded-lg shadow-md p-4"},Ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},qe={class:"flex items-center gap-2"},Te={class:"flex items-center gap-2"},ke={class:"flex items-center gap-2"},Ie={class:"flex items-center"},De={class:"flex items-center gap-2"},Qe={class:"flex items-center"},ze={class:"font-medium"},Ae={class:"mt-4"},Ue={class:"w-full flex flex-col sm:flex-row gap-2 items-center"},Le={class:"flex items-center gap-2"},Fe={class:"text-sm text-gray-600"},Me=xe({__name:"QRCodeGeneral",props:{size:{default:J}},emits:["update:size"],setup($,{emit:B}){const u=P(),T=$,k=B,r=d(localStorage.getItem("qr-text")||""),x=d(null),_=d(null),n=d(T.size),m=d(localStorage.getItem("qr-color-general")||K),p=d(localStorage.getItem("qr-bg-color-general")||W),S=d(localStorage.getItem("qr-dot-shape")||Y),w=d(localStorage.getItem("qr-export-format")||ee),b=d(m),y=d(p),v=()=>{if(!(!x.value||!r.value.trim())){if(r.value.length>c){u.add({severity:"error",summary:"Error",detail:`El texto es demasiado largo. El límite es de ${c} caracteres.`,life:5e3});return}try{x.value.innerHTML="",_.value=le(r.value,n.value,m.value,p.value,S.value),_.value.append(x.value)}catch(s){console.error("Error generando QR:",s),u.add({severity:"error",summary:"Error",detail:"No se pudo generar el código QR. El texto puede ser demasiado complejo.",life:5e3})}}},N=()=>{re(x.value,u)},j=()=>{ie(_.value,"qr-general",w.value)},H=()=>{ne(b,y,"general",u),r.value.trim()&&v()},G=()=>{const s=A(n.value,50);n.value=s,k("update:size",s)},X=()=>{const s=A(n.value,-50);n.value=s,k("update:size",s)};return R(r,s=>{localStorage.setItem("qr-text",s),s.trim()&&v(),s.length>c&&u.add({severity:"warn",summary:"Advertencia",detail:`Has excedido el límite de ${c} caracteres.`,life:3e3})}),R([m,p],([s,a])=>{localStorage.setItem("qr-color-general",s),localStorage.setItem("qr-bg-color-general",a),r.value.trim()&&v()}),R(S,s=>{localStorage.setItem("qr-dot-shape",s),r.value.trim()&&v()}),R(w,s=>{localStorage.setItem("qr-export-format",s)}),R(()=>T.size,s=>{n.value=s,r.value.trim()&&v()}),_e(()=>{r.value.trim()&&v()}),(s,a)=>{const I=Ce("tooltip");return E(),F("div",he,[l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(U),{class:"w-4 h-4"})]),_:1}),l(e(Z),{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t),rows:"4",class:"w-full",placeholder:"Enter text or URL here..."},null,8,["modelValue"])]),_:1}),o("div",Re,[o("span",{class:we(["text-sm",r.value.length>e(c)?"text-red-500":"text-gray-500"])},[r.value.length>e(c)?(E(),F("span",Se,"⚠️")):be("",!0),ye(" "+g(r.value.length)+"/"+g(e(c))+" caracteres ",1)],2)]),o("div",Ve,[a[13]||(a[13]=o("h3",{class:"text-lg font-semibold mb-4"},"Configuración",-1)),o("div",Ee,[o("div",qe,[a[9]||(a[9]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Color del QR:",-1)),l(e(D),{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=t=>m.value=t)},null,8,["modelValue"]),l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(L),{class:"w-4 h-4"})]),_:1}),l(e(Q),{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=t=>e(V)(t,"qr",b.value,y.value,e(u))),onBlur:a[3]||(a[3]=t=>e(V)(t.target.value,"qr",b.value,y.value,e(u))),class:"w-24 text-center text-xs font-mono",style:q({backgroundColor:m.value,color:"#fff",textShadow:"0 0 2px #000"})},null,8,["modelValue","style"])]),_:1})]),o("div",Te,[a[10]||(a[10]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Color de fondo:",-1)),l(e(D),{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=t=>p.value=t)},null,8,["modelValue"]),l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(L),{class:"w-4 h-4"})]),_:1}),l(e(Q),{modelValue:p.value,"onUpdate:modelValue":a[5]||(a[5]=t=>e(V)(t,"bg",b.value,y.value,e(u))),onBlur:a[6]||(a[6]=t=>e(V)(t.target.value,"bg",b.value,y.value,e(u))),class:"w-24 text-center text-xs font-mono",style:q({backgroundColor:p.value,color:"#000",textShadow:"0 0 2px #fff"})},null,8,["modelValue","style"])]),_:1})]),o("div",ke,[a[11]||(a[11]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Forma:",-1)),l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(ue),{class:"w-4 h-4"})]),_:1}),l(e(z),{modelValue:S.value,"onUpdate:modelValue":a[7]||(a[7]=t=>S.value=t),options:e(ae),optionLabel:"label",optionValue:"value",class:"w-full"},{option:i(t=>[o("div",Ie,[o("span",{style:q({display:"inline-block",width:"18px",height:"18px",borderRadius:t.option.value==="dots"?"50%":t.option.value==="rounded"?"8px":t.option.value==="classy"?"2px":t.option.value==="classy-rounded"?"6px 6px 2px 2px":t.option.value==="square"?"0":"12px",background:"#0288d1",border:"1.5px solid #333",marginRight:"8px"})},null,4),o("span",null,g(t.option.label),1)])]),_:1},8,["modelValue","options"])]),_:1})]),o("div",De,[a[12]||(a[12]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Formato:",-1)),l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(ce),{class:"w-4 h-4"})]),_:1}),l(e(z),{modelValue:w.value,"onUpdate:modelValue":a[8]||(a[8]=t=>w.value=t),options:e(te),optionLabel:"label",optionValue:"value",class:"w-full"},{option:i(t=>[o("div",Qe,[o("span",ze,g(t.option.label),1)])]),_:1},8,["modelValue","options"])]),_:1})])]),o("div",Ae,[l(e(f),{onClick:H,severity:"secondary",label:"Restaurar configuración por defecto",text:""},{icon:i(()=>[l(e(me),{class:"w-4 h-4 mr-2"})]),_:1})])]),o("div",Ue,[l(e(f),{onClick:v,severity:"success",class:"w-full",label:"Generar código QR",disabled:!r.value.trim()||r.value.length>e(c)},{icon:i(()=>[l(e(U),{class:"w-4 h-4 mr-2"})]),_:1},8,["disabled"]),l(e(f),{onClick:N,severity:"help",class:"w-full",label:"Copiar código QR",disabled:!_.value||!r.value.trim()},{icon:i(()=>[l(e(pe),{class:"w-4 h-4 mr-2"})]),_:1},8,["disabled"]),l(e(f),{onClick:j,severity:"info",class:"w-full",label:`Descargar ${w.value.toUpperCase()}`,disabled:!_.value||!r.value.trim()},{icon:i(()=>[l(e(ve),{class:"w-4 h-4 mr-2"})]),_:1},8,["label","disabled"]),o("div",Le,[M((E(),O(e(f),{onClick:X,severity:"secondary",disabled:n.value<=e(oe)},{icon:i(()=>[l(e(fe),{class:"w-4 h-4"})]),_:1},8,["disabled"])),[[I,"Reducir tamaño",void 0,{top:!0}]]),o("span",Fe,g(n.value)+"x"+g(n.value)+"px",1),M((E(),O(e(f),{onClick:G,severity:"secondary",disabled:n.value>=e(se)},{icon:i(()=>[l(e(ge),{class:"w-4 h-4"})]),_:1},8,["disabled"])),[[I,"Aumentar tamaño",void 0,{top:!0}]])])]),o("div",{ref_key:"qrcodeContainer",ref:x,class:"flex justify-center mt-4"},null,512)])}}}),We=de(Me,[["__scopeId","data-v-54b4e30b"]]);export{We as default};
