import{u as G,g as C,k as X,f as h,D,h as z,i as Z,a as f}from"./primevue-CTM77RMy.js";import{D as P,a as J,b as K,c as W,M as c,d as Y,h as R,e as ee,f as le,g as ae,i as te,j as oe,r as se,k as I}from"./qrCodeCommonFunctions-BZDhSGhP.js";import{Q as T,P as A,_ as re}from"./index-CnwFKGTZ.js";import{S as ie}from"./settings-CEmIS2yx.js";import{R as ne}from"./refresh-cw-BTKSc2z-.js";import{C as de}from"./copy-Yh2tgDJH.js";import{D as ue}from"./download-l2r6xAiI.js";import{M as ce}from"./minus-DDOrMK_O.js";import{P as me}from"./plus-DSso3Ke8.js";import{P as pe,r as u,w as S,o as ve,c as U,x as l,e as o,B as i,R as e,p as fe,j as ge,A as xe,t as b,l as L,k as $,d as V,s as E,h as we}from"./vue-vendor-ByoO1CXK.js";import"./_commonjsHelpers-D6-XlEtG.js";const _e={class:"space-y-4"},be={class:"w-full flex justify-end"},ye={key:0,class:"mr-2",role:"img","aria-label":"advertencia"},Ce={class:"w-full bg-white rounded-lg shadow-md p-4"},he={class:"flex flex-col md:flex-row md:items-center md:gap-6 gap-4"},Re={class:"flex-1 flex items-center gap-2 min-w-0"},Se={class:"flex-1 flex items-center gap-2 min-w-0"},Ve={class:"flex-1 flex items-center gap-2 min-w-0"},Ee={class:"flex items-center"},ke={class:"mt-4"},qe={class:"w-full flex flex-col sm:flex-row gap-2 items-center"},Qe={class:"flex items-center gap-2"},De={class:"text-sm text-gray-600"},ze=pe({__name:"QRCodeGeneral",props:{size:{default:P}},emits:["update:size"],setup(B,{emit:M}){const d=G(),k=B,q=M,s=u(localStorage.getItem("qr-text")||""),g=u(null),x=u(null),n=u(k.size),m=u(localStorage.getItem("qr-color-general")||J),p=u(localStorage.getItem("qr-bg-color-general")||K),y=u(localStorage.getItem("qr-dot-shape")||W),w=u(m),_=u(p),v=()=>{if(!(!g.value||!s.value.trim())){if(s.value.length>c){d.add({severity:"error",summary:"Error",detail:`El texto es demasiado largo. El límite es de ${c} caracteres.`,life:5e3});return}try{g.value.innerHTML="",x.value=Y(s.value,n.value,m.value,p.value,y.value),x.value.append(g.value)}catch(r){console.error("Error generando QR:",r),d.add({severity:"error",summary:"Error",detail:"No se pudo generar el código QR. El texto puede ser demasiado complejo.",life:5e3})}}},N=()=>{te(g.value,d)},j=()=>{oe(x.value,"qr-general")},H=()=>{se(w,_,"general",d),s.value.trim()&&v()},O=()=>{const r=I(n.value,50);n.value=r,q("update:size",r)},F=()=>{const r=I(n.value,-50);n.value=r,q("update:size",r)};return S(s,r=>{localStorage.setItem("qr-text",r),r.trim()&&v(),r.length>c&&d.add({severity:"warn",summary:"Advertencia",detail:`Has excedido el límite de ${c} caracteres.`,life:3e3})}),S([m,p],([r,a])=>{localStorage.setItem("qr-color-general",r),localStorage.setItem("qr-bg-color-general",a),s.value.trim()&&v()}),S(y,r=>{localStorage.setItem("qr-dot-shape",r),s.value.trim()&&v()}),S(()=>k.size,r=>{n.value=r,s.value.trim()&&v()}),ve(()=>{s.value.trim()&&v()}),(r,a)=>{const Q=we("tooltip");return V(),U("div",_e,[l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(T),{class:"w-4 h-4"})]),_:1}),l(e(X),{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t),rows:"4",class:"w-full",placeholder:"Enter text or URL here..."},null,8,["modelValue"])]),_:1}),o("div",be,[o("span",{class:fe(["text-sm",s.value.length>e(c)?"text-red-500":"text-gray-500"])},[s.value.length>e(c)?(V(),U("span",ye,"⚠️")):ge("",!0),xe(" "+b(s.value.length)+"/"+b(e(c))+" caracteres ",1)],2)]),o("div",Ce,[a[11]||(a[11]=o("h3",{class:"text-lg font-semibold mb-4"},"Configuración",-1)),o("div",he,[o("div",Re,[a[8]||(a[8]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Color del QR:",-1)),l(e(D),{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=t=>m.value=t)},null,8,["modelValue"]),l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(A),{class:"w-4 h-4"})]),_:1}),l(e(z),{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=t=>e(R)(t,"qr",w.value,_.value,e(d))),onBlur:a[3]||(a[3]=t=>e(R)(t.target.value,"qr",w.value,_.value,e(d))),class:"w-24 text-center text-xs font-mono",style:E({backgroundColor:m.value,color:"#fff",textShadow:"0 0 2px #000"})},null,8,["modelValue","style"])]),_:1})]),o("div",Se,[a[9]||(a[9]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Color de fondo:",-1)),l(e(D),{modelValue:p.value,"onUpdate:modelValue":a[4]||(a[4]=t=>p.value=t)},null,8,["modelValue"]),l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(A),{class:"w-4 h-4"})]),_:1}),l(e(z),{modelValue:p.value,"onUpdate:modelValue":a[5]||(a[5]=t=>e(R)(t,"bg",w.value,_.value,e(d))),onBlur:a[6]||(a[6]=t=>e(R)(t.target.value,"bg",w.value,_.value,e(d))),class:"w-24 text-center text-xs font-mono",style:E({backgroundColor:p.value,color:"#000",textShadow:"0 0 2px #fff"})},null,8,["modelValue","style"])]),_:1})]),o("div",Ve,[a[10]||(a[10]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Forma:",-1)),l(e(h),null,{default:i(()=>[l(e(C),null,{default:i(()=>[l(e(ie),{class:"w-4 h-4"})]),_:1}),l(e(Z),{modelValue:y.value,"onUpdate:modelValue":a[7]||(a[7]=t=>y.value=t),options:e(ee),optionLabel:"label",optionValue:"value",class:"w-full"},{option:i(t=>[o("div",Ee,[o("span",{style:E({display:"inline-block",width:"18px",height:"18px",borderRadius:t.option.value==="dots"?"50%":t.option.value==="rounded"?"8px":t.option.value==="classy"?"2px":t.option.value==="classy-rounded"?"6px 6px 2px 2px":t.option.value==="square"?"0":"12px",background:"#0288d1",border:"1.5px solid #333",marginRight:"8px"})},null,4),o("span",null,b(t.option.label),1)])]),_:1},8,["modelValue","options"])]),_:1})])]),o("div",ke,[l(e(f),{onClick:H,severity:"secondary",label:"Restaurar configuración por defecto",text:""},{icon:i(()=>[l(e(ne),{class:"w-4 h-4 mr-2"})]),_:1})])]),o("div",qe,[l(e(f),{onClick:v,severity:"success",class:"w-full",label:"Generar código QR",disabled:!s.value.trim()||s.value.length>e(c)},{icon:i(()=>[l(e(T),{class:"w-4 h-4 mr-2"})]),_:1},8,["disabled"]),l(e(f),{onClick:N,severity:"help",class:"w-full",label:"Copiar código QR",disabled:!x.value||!s.value.trim()},{icon:i(()=>[l(e(de),{class:"w-4 h-4 mr-2"})]),_:1},8,["disabled"]),l(e(f),{onClick:j,severity:"info",class:"w-full",label:"Descargar código QR",disabled:!x.value||!s.value.trim()},{icon:i(()=>[l(e(ue),{class:"w-4 h-4 mr-2"})]),_:1},8,["disabled"]),o("div",Qe,[L((V(),$(e(f),{onClick:F,severity:"secondary",disabled:n.value<=e(le)},{icon:i(()=>[l(e(ce),{class:"w-4 h-4"})]),_:1},8,["disabled"])),[[Q,"Reducir tamaño",void 0,{top:!0}]]),o("span",De,b(n.value)+"x"+b(n.value)+"px",1),L((V(),$(e(f),{onClick:O,severity:"secondary",disabled:n.value>=e(ae)},{icon:i(()=>[l(e(me),{class:"w-4 h-4"})]),_:1},8,["disabled"])),[[Q,"Aumentar tamaño",void 0,{top:!0}]])])]),o("div",{ref_key:"qrcodeContainer",ref:g,class:"flex justify-center mt-4"},null,512)])}}}),Oe=re(ze,[["__scopeId","data-v-43ba309f"]]);export{Oe as default};
