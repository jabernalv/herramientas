import{u as O,g as C,k as F,f as h,D as k,h as z,i as G,a as f}from"./primevue-DrPXlnFP.js";import{D as X,a as Z,b as J,c as K,M as c,d as P,h as S,e as W,f as Y,g as ee,i as le,j as ae,r as te,k as I}from"./qrCodeCommonFunctions-BZDhSGhP.js";import{Q as oe,P as T,_ as se}from"./index-BYHs7J-Q.js";import{S as re}from"./settings-ps3e9SKy.js";import{P as ie,r as d,w as R,o as ne,c as D,x as a,e as o,B as u,R as e,p as de,j as ue,A as ce,t as y,l as A,d as U,s as V,h as me}from"./vue-vendor-D8N656sj.js";import"./_commonjsHelpers-D6-XlEtG.js";const pe={class:"space-y-4"},ve={class:"w-full flex justify-end"},fe={key:0,class:"mr-2",role:"img","aria-label":"advertencia"},ge={class:"w-full bg-white rounded-lg shadow-md p-4"},xe={class:"flex flex-col md:flex-row md:items-center md:gap-6 gap-4"},be={class:"flex-1 flex items-center gap-2 min-w-0"},we={class:"flex-1 flex items-center gap-2 min-w-0"},ye={class:"flex-1 flex items-center gap-2 min-w-0"},_e={class:"flex items-center"},Ce={class:"mt-4"},he={class:"w-full flex flex-col sm:flex-row gap-2 items-center"},Se={class:"flex items-center gap-2"},Re={class:"text-sm text-gray-600"},Ve=ie({__name:"QRCodeGeneral",props:{size:{default:X}},emits:["update:size"],setup(L,{emit:$}){const n=O(),q=L,E=$,s=d(localStorage.getItem("qr-text")||""),g=d(null),x=d(null),i=d(q.size),m=d(localStorage.getItem("qr-color-general")||Z),p=d(localStorage.getItem("qr-bg-color-general")||J),_=d(localStorage.getItem("qr-dot-shape")||K),b=d(m),w=d(p),v=()=>{if(!(!g.value||!s.value.trim())){if(s.value.length>c){n.add({severity:"error",summary:"Error",detail:`El texto es demasiado largo. El límite es de ${c} caracteres.`,life:5e3});return}try{g.value.innerHTML="",x.value=P(s.value,i.value,m.value,p.value,_.value),x.value.append(g.value)}catch(r){console.error("Error generando QR:",r),n.add({severity:"error",summary:"Error",detail:"No se pudo generar el código QR. El texto puede ser demasiado complejo.",life:5e3})}}},B=()=>{le(g.value,n)},N=()=>{ae(x.value,"qr-general")},j=()=>{te(b,w,"general",n),s.value.trim()&&v()},H=()=>{const r=I(i.value,50);i.value=r,E("update:size",r)},M=()=>{const r=I(i.value,-50);i.value=r,E("update:size",r)};return R(s,r=>{localStorage.setItem("qr-text",r),r.trim()&&v(),r.length>c&&n.add({severity:"warn",summary:"Advertencia",detail:`Has excedido el límite de ${c} caracteres.`,life:3e3})}),R([m,p],([r,l])=>{localStorage.setItem("qr-color-general",r),localStorage.setItem("qr-bg-color-general",l),s.value.trim()&&v()}),R(_,r=>{localStorage.setItem("qr-dot-shape",r),s.value.trim()&&v()}),R(()=>q.size,r=>{i.value=r,s.value.trim()&&v()}),ne(()=>{s.value.trim()&&v()}),(r,l)=>{const Q=me("tooltip");return U(),D("div",pe,[a(e(h),null,{default:u(()=>[a(e(C),null,{default:u(()=>[a(e(oe),{class:"w-4 h-4"})]),_:1}),a(e(F),{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=t=>s.value=t),rows:"4",class:"w-full",placeholder:"Enter text or URL here..."},null,8,["modelValue"])]),_:1}),o("div",ve,[o("span",{class:de(["text-sm",s.value.length>e(c)?"text-red-500":"text-gray-500"])},[s.value.length>e(c)?(U(),D("span",fe,"⚠️")):ue("",!0),ce(" "+y(s.value.length)+"/"+y(e(c))+" caracteres ",1)],2)]),o("div",ge,[l[11]||(l[11]=o("h3",{class:"text-lg font-semibold mb-4"},"Configuración",-1)),o("div",xe,[o("div",be,[l[8]||(l[8]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Color del QR:",-1)),a(e(k),{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value=t)},null,8,["modelValue"]),a(e(h),null,{default:u(()=>[a(e(C),null,{default:u(()=>[a(e(T),{class:"w-4 h-4"})]),_:1}),a(e(z),{modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=t=>e(S)(t,"qr",b.value,w.value,e(n))),onBlur:l[3]||(l[3]=t=>e(S)(t.target.value,"qr",b.value,w.value,e(n))),class:"w-24 text-center text-xs font-mono",style:V({backgroundColor:m.value,color:"#fff",textShadow:"0 0 2px #000"})},null,8,["modelValue","style"])]),_:1})]),o("div",we,[l[9]||(l[9]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Color de fondo:",-1)),a(e(k),{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=t=>p.value=t)},null,8,["modelValue"]),a(e(h),null,{default:u(()=>[a(e(C),null,{default:u(()=>[a(e(T),{class:"w-4 h-4"})]),_:1}),a(e(z),{modelValue:p.value,"onUpdate:modelValue":l[5]||(l[5]=t=>e(S)(t,"bg",b.value,w.value,e(n))),onBlur:l[6]||(l[6]=t=>e(S)(t.target.value,"bg",b.value,w.value,e(n))),class:"w-24 text-center text-xs font-mono",style:V({backgroundColor:p.value,color:"#000",textShadow:"0 0 2px #fff"})},null,8,["modelValue","style"])]),_:1})]),o("div",ye,[l[10]||(l[10]=o("label",{class:"text-sm font-medium text-gray-700 whitespace-nowrap"},"Forma:",-1)),a(e(h),null,{default:u(()=>[a(e(C),null,{default:u(()=>[a(e(re),{class:"w-4 h-4"})]),_:1}),a(e(G),{modelValue:_.value,"onUpdate:modelValue":l[7]||(l[7]=t=>_.value=t),options:e(W),optionLabel:"label",optionValue:"value",class:"w-full"},{option:u(t=>[o("div",_e,[o("span",{style:V({display:"inline-block",width:"18px",height:"18px",borderRadius:t.option.value==="dots"?"50%":t.option.value==="rounded"?"8px":t.option.value==="classy"?"2px":t.option.value==="classy-rounded"?"6px 6px 2px 2px":t.option.value==="square"?"0":"12px",background:"#0288d1",border:"1.5px solid #333",marginRight:"8px"})},null,4),o("span",null,y(t.option.label),1)])]),_:1},8,["modelValue","options"])]),_:1})])]),o("div",Ce,[a(e(f),{onClick:j,severity:"secondary",icon:"pi pi-refresh",label:"Restaurar configuración por defecto",text:""})])]),o("div",he,[a(e(f),{onClick:v,severity:"success",class:"w-full",icon:"pi pi-qrcode",label:"Generar código QR",disabled:!s.value.trim()||s.value.length>e(c)},null,8,["disabled"]),a(e(f),{onClick:B,severity:"help",class:"w-full",icon:"pi pi-copy",label:"Copiar código QR",disabled:!x.value||!s.value.trim()},null,8,["disabled"]),a(e(f),{onClick:N,severity:"info",class:"w-full",icon:"pi pi-download",label:"Descargar código QR",disabled:!x.value||!s.value.trim()},null,8,["disabled"]),o("div",Se,[A(a(e(f),{onClick:M,severity:"secondary",icon:"pi pi-minus",disabled:i.value<=e(Y)},null,8,["disabled"]),[[Q,"Reducir tamaño",void 0,{top:!0}]]),o("span",Re,y(i.value)+"x"+y(i.value)+"px",1),A(a(e(f),{onClick:H,severity:"secondary",icon:"pi pi-plus",disabled:i.value>=e(ee)},null,8,["disabled"]),[[Q,"Aumentar tamaño",void 0,{top:!0}]])])]),o("div",{ref_key:"qrcodeContainer",ref:g,class:"flex justify-center mt-4"},null,512)])}}}),Te=se(Ve,[["__scopeId","data-v-0fcd2bc4"]]);export{Te as default};
