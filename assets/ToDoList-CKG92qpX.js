import{P as O,r as _,o as B,w as U,c as g,e as s,x as n,B as v,A,f as E,j as f,R as o,H as L,t as j,F as q,i as z,d,k as h,p as M,n as K}from"./vue-vendor-DSKsDytq.js";import{A as F,a as m,B as H,w as N,z as S,v as P,i as R}from"./primevue-Cz0MYcUz.js";import{C as G,D as Q}from"./vue3-smooth-dnd.esm-DyDYc-3R.js";import{c as W,_ as X}from"./index-DeQjBybw.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=W("list-todo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Y={class:"bg-gray-100 py-2 px-4 rounded-md shadow-sm mb-6"},Z={class:"text-sm","aria-label":"Miga de pan"},ee={class:"list-none p-0 inline-flex space-x-2"},te={class:"flex items-center"},ae={class:"max-w-2xl mx-auto px-4 py-4"},se={class:"flex flex-wrap gap-2 justify-end mb-6"},le={class:"inline-flex items-center cursor-pointer"},oe={class:"bg-white p-6 rounded-lg shadow-md mb-6"},ne={key:0,class:"text-red-500 text-sm mt-2"},ie={key:0,class:"bg-white p-6 rounded-lg shadow-md text-center text-gray-500"},re={class:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-between group"},ce={class:"flex items-center flex-grow gap-2"},de=["onDblclick"],ue={class:"flex gap-1"},pe={key:1,class:"mt-6 text-center"},me={components:{ListTodo:V}},ge=O({...me,__name:"ToDoList",setup(ve){const l=_([]),x=_(""),r=_(""),w=F();B(()=>{const t=localStorage.getItem("todoList");t&&(l.value=JSON.parse(t))});const u=()=>{localStorage.setItem("todoList",JSON.stringify(l.value))};U(l,u,{deep:!0});const k=()=>{const t=x.value.trim();if(!t){r.value="La tarea no puede estar vacía.";return}if(l.value.some(e=>e.text.toLowerCase()===t.toLowerCase())){r.value="Esta tarea ya existe.";return}l.value.unshift({id:Date.now(),text:t,done:!1}),x.value="",r.value="",u()},C=t=>{l.value[t].editing=!0,K(()=>{})},y=t=>{const e=l.value[t];if(!e.text.trim()){r.value="La tarea no puede estar vacía.";return}if(l.value.some((c,a)=>a!==t&&c.text.toLowerCase()===e.text.toLowerCase())){r.value="Esta tarea ya existe.";return}e.text=e.text.trim(),e.editing=!1,r.value="",u()},T=t=>{w.require({message:"¿Seguro que deseas eliminar esta tarea?",header:"Confirmar eliminación",icon:"pi pi-exclamation-triangle",acceptLabel:"Sí, eliminar",rejectLabel:"Cancelar",acceptIcon:"pi pi-trash",rejectIcon:"pi pi-times-circle",acceptClass:"p-button-danger",rejectClass:"p-button-warning",accept:()=>{l.value.splice(t,1),u()}})},I=()=>{w.require({message:"¿Estás seguro de que quieres limpiar todas las tareas?",header:"Confirmar limpieza",icon:"pi pi-exclamation-triangle",acceptLabel:"Sí, limpiar",rejectLabel:"Cancelar",acceptIcon:"pi pi-trash",rejectIcon:"pi pi-times-circle",acceptClass:"p-button-danger",rejectClass:"p-button-warning",accept:()=>{l.value=[],u()}})};function D(t){if(!t||t.removedIndex===null&&t.addedIndex===null)return;const e=[...l.value],[c]=e.splice(t.removedIndex,1);e.splice(t.addedIndex,0,c),l.value=e,u()}const $=()=>{const t=JSON.stringify(l.value,null,2),e=new Blob([t],{type:"application/json"}),c=URL.createObjectURL(e),a=document.createElement("a");a.href=c,a.download="lista-pendientes.json",a.click(),URL.revokeObjectURL(c)},J=t=>{const e=t.target;if(!e.files||!e.files[0])return;const c=e.files[0],a=new FileReader;a.onload=p=>{try{const i=JSON.parse(p.target?.result);if(!Array.isArray(i)||!i.every(b=>typeof b.id=="number"&&typeof b.text=="string"&&typeof b.done=="boolean")){r.value="Archivo JSON inválido.";return}l.value=i,u(),r.value=""}catch{r.value="No se pudo leer el archivo JSON."}},a.readAsText(c)};return(t,e)=>{const c=E("router-link");return d(),g("div",null,[s("div",Y,[s("nav",Z,[s("ol",ee,[s("li",te,[n(c,{to:"/",class:"text-blue-500 hover:text-blue-700"},{default:v(()=>e[1]||(e[1]=[s("i",{class:"pi pi-home mr-1"},null,-1),A(" Herramientas ")])),_:1,__:[1]})]),e[2]||(e[2]=s("li",null,[s("i",{class:"pi pi-chevron-right text-gray-400"})],-1)),e[3]||(e[3]=s("li",{class:"text-gray-700"},"Lista de pendientes",-1))])])]),s("div",ae,[e[6]||(e[6]=s("div",{class:"text-center mb-8"},[s("h1",{class:"text-3xl font-bold text-center text-gray-800 mb-2"}," 📝 Lista de Pendientes ")],-1)),s("div",se,[n(o(m),{onClick:$,icon:"pi pi-download",label:"Descargar JSON",outlined:"",size:"small"}),s("label",le,[n(o(m),{icon:"pi pi-upload",label:"Cargar JSON",outlined:"",size:"small",class:"mr-2"}),s("input",{type:"file",accept:"application/json",onChange:J,class:"hidden"},null,32)])]),n(o(H)),s("div",oe,[n(o(P),null,{default:v(()=>[n(o(N),null,{default:v(()=>[n(o(V),{class:"w-5 h-5 text-gray-400"})]),_:1}),n(o(S),{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),onKeyup:L(k,["enter"]),placeholder:"Nueva tarea...",class:"flex-grow p-3 border-none focus:ring-2 focus:ring-blue-500"},null,8,["modelValue"]),n(o(N),null,{default:v(()=>[n(o(m),{onClick:k,disabled:!x.value.trim(),icon:"pi pi-plus",class:"rounded-md ml-0"},null,8,["disabled"])]),_:1})]),_:1}),r.value?(d(),g("p",ne,j(r.value),1)):f("",!0)]),l.value.length===0?(d(),g("div",ie,e[4]||(e[4]=[s("p",null,"¡No tienes tareas pendientes! 🎉",-1)]))):f("",!0),n(o(G),{tag:"ul",class:"space-y-3","drag-handle-selector":".drag-handle",onDrop:D},{default:v(()=>[(d(!0),g(q,null,z(l.value,(a,p)=>(d(),h(o(Q),{key:a.id},{default:v(()=>[s("li",re,[s("div",ce,[e[5]||(e[5]=s("span",{class:"drag-handle cursor-move text-gray-400 hover:text-blue-500 transition",title:"Arrastrar para reordenar"},[s("i",{class:"pi pi-bars"})],-1)),n(o(R),{modelValue:a.done,"onUpdate:modelValue":i=>a.done=i,onChange:u,binary:!0,class:"mr-2"},null,8,["modelValue","onUpdate:modelValue"]),a.editing?(d(),h(o(S),{key:1,modelValue:a.text,"onUpdate:modelValue":i=>a.text=i,onKeyup:L(i=>y(p),["enter"]),onBlur:i=>y(p),class:"flex-grow",autofocus:""},null,8,["modelValue","onUpdate:modelValue","onKeyup","onBlur"])):(d(),g("span",{key:0,class:M([{"line-through text-gray-500":a.done,"text-gray-800":!a.done},"text-lg flex-grow cursor-pointer"]),onDblclick:i=>C(p),title:"Doble clic para editar"},j(a.text),43,de))]),s("div",ue,[a.editing?f("",!0):(d(),h(o(m),{key:0,onClick:i=>C(p),icon:"pi pi-pencil",text:"",class:"text-blue-500",title:"Editar"},null,8,["onClick"])),a.editing?(d(),h(o(m),{key:1,onClick:i=>y(p),icon:"pi pi-check",text:"",class:"text-green-600",title:"Guardar"},null,8,["onClick"])):f("",!0),n(o(m),{onClick:i=>T(p),icon:"pi pi-trash",text:"",severity:"danger",title:"Eliminar"},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1}),l.value.length>0?(d(),g("div",pe,[n(o(m),{onClick:I,label:"Limpiar Todo",icon:"pi pi-trash",severity:"danger"})])):f("",!0)])])}}}),be=X(ge,[["__scopeId","data-v-63dc88d1"]]);export{be as default};
