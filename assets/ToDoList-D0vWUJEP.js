import{P as D,r as h,o as $,w as j,c as p,e as n,x as u,j as g,R as l,H as y,t as w,B as k,F as B,i as S,d as o,k as x,p as E,n as N}from"./vue-vendor-DSKsDytq.js";import{A as q,B as U,z as L,a as v,i as A}from"./primevue-Cz0MYcUz.js";import{C as K,D as z}from"./vue3-smooth-dnd.esm-DyDYc-3R.js";import{_ as F}from"./index-C9Un_TOC.js";const J={class:"container mx-auto p-4 max-w-md"},O={class:"bg-white p-6 rounded-lg shadow-md mb-6"},P={class:"flex items-center gap-2"},G={key:0,class:"text-red-500 text-sm mt-2"},H={key:0,class:"bg-white p-6 rounded-lg shadow-md text-center text-gray-500"},M={class:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-between group"},Q={class:"flex items-center flex-grow gap-2"},W=["onDblclick"],X={class:"flex gap-1"},Y={key:1,class:"mt-6 text-center"},Z=D({__name:"ToDoList",setup(R){const s=h([]),m=h(""),i=h(""),b=q();$(()=>{const e=localStorage.getItem("todoList");e&&(s.value=JSON.parse(e))});const d=()=>{localStorage.setItem("todoList",JSON.stringify(s.value))};j(s,d,{deep:!0});const C=()=>{const e=m.value.trim();if(!e){i.value="La tarea no puede estar vacía.";return}if(s.value.some(t=>t.text.toLowerCase()===e.toLowerCase())){i.value="Esta tarea ya existe.";return}s.value.unshift({id:Date.now(),text:e,done:!1}),m.value="",i.value="",d()},_=e=>{s.value[e].editing=!0,N(()=>{})},f=e=>{const t=s.value[e];if(!t.text.trim()){i.value="La tarea no puede estar vacía.";return}if(s.value.some((a,c)=>c!==e&&a.text.toLowerCase()===t.text.toLowerCase())){i.value="Esta tarea ya existe.";return}t.text=t.text.trim(),t.editing=!1,i.value="",d()},V=e=>{b.require({message:"¿Seguro que deseas eliminar esta tarea?",header:"Confirmar eliminación",icon:"pi pi-exclamation-triangle",acceptLabel:"Sí, eliminar",rejectLabel:"Cancelar",acceptIcon:"pi pi-trash",rejectIcon:"pi pi-times-circle",acceptClass:"p-button-danger",rejectClass:"p-button-warning",accept:()=>{s.value.splice(e,1),d()}})},I=()=>{b.require({message:"¿Estás seguro de que quieres limpiar todas las tareas?",header:"Confirmar limpieza",icon:"pi pi-exclamation-triangle",acceptLabel:"Sí, limpiar",rejectLabel:"Cancelar",acceptIcon:"pi pi-trash",rejectIcon:"pi pi-times-circle",acceptClass:"p-button-danger",rejectClass:"p-button-warning",accept:()=>{s.value=[],d()}})};function T(e){if(!e||e.removedIndex===null&&e.addedIndex===null)return;const t=[...s.value],[a]=t.splice(e.removedIndex,1);t.splice(e.addedIndex,0,a),s.value=t,d()}return(e,t)=>(o(),p("div",J,[t[3]||(t[3]=n("h1",{class:"text-3xl font-bold text-center text-gray-800 mb-6"}," 📝 Lista de Pendientes ",-1)),u(l(U)),n("div",O,[n("div",P,[u(l(L),{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=a=>m.value=a),onKeyup:y(C,["enter"]),placeholder:"Nueva tarea...",class:"flex-grow rounded-l-md p-3 border-none focus:ring-2 focus:ring-blue-500"},null,8,["modelValue"]),u(l(v),{onClick:C,disabled:!m.value.trim(),label:"Agregar",icon:"pi pi-plus",class:"rounded-r-md ml-0"},null,8,["disabled"])]),i.value?(o(),p("p",G,w(i.value),1)):g("",!0)]),s.value.length===0?(o(),p("div",H,t[1]||(t[1]=[n("p",null,"¡No tienes tareas pendientes! 🎉",-1)]))):g("",!0),u(l(K),{tag:"ul",class:"space-y-3","drag-handle-selector":".drag-handle",onDrop:T},{default:k(()=>[(o(!0),p(B,null,S(s.value,(a,c)=>(o(),x(l(z),{key:a.id},{default:k(()=>[n("li",M,[n("div",Q,[t[2]||(t[2]=n("span",{class:"drag-handle cursor-move text-gray-400 hover:text-blue-500 transition",title:"Arrastrar para reordenar"},[n("i",{class:"pi pi-bars"})],-1)),u(l(A),{modelValue:a.done,"onUpdate:modelValue":r=>a.done=r,onChange:d,binary:!0,class:"mr-2"},null,8,["modelValue","onUpdate:modelValue"]),a.editing?(o(),x(l(L),{key:1,modelValue:a.text,"onUpdate:modelValue":r=>a.text=r,onKeyup:y(r=>f(c),["enter"]),onBlur:r=>f(c),class:"flex-grow",autofocus:""},null,8,["modelValue","onUpdate:modelValue","onKeyup","onBlur"])):(o(),p("span",{key:0,class:E([{"line-through text-gray-500":a.done,"text-gray-800":!a.done},"text-lg flex-grow cursor-pointer"]),onDblclick:r=>_(c),title:"Doble clic para editar"},w(a.text),43,W))]),n("div",X,[a.editing?g("",!0):(o(),x(l(v),{key:0,onClick:r=>_(c),icon:"pi pi-pencil",text:"",class:"text-blue-500",title:"Editar"},null,8,["onClick"])),a.editing?(o(),x(l(v),{key:1,onClick:r=>f(c),icon:"pi pi-check",text:"",class:"text-green-600",title:"Guardar"},null,8,["onClick"])):g("",!0),u(l(v),{onClick:r=>V(c),icon:"pi pi-trash",text:"",severity:"danger",title:"Eliminar"},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1}),s.value.length>0?(o(),p("div",Y,[u(l(v),{onClick:I,label:"Limpiar Todo",icon:"pi pi-trash",severity:"danger"})])):g("",!0)]))}}),le=F(Z,[["__scopeId","data-v-4ad01ca0"]]);export{le as default};
