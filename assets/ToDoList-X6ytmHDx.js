import{c as m,d,e as o,P as O,r as b,o as B,w as U,x as r,j as v,R as s,B as g,t as L,K as j,F as E,i as q,k as x,p as A,n as K}from"./vue-vendor-D8N656sj.js";import{q as F,a as p,r as R,g as S,h as N,f as G,n as P}from"./primevue-DrPXlnFP.js";import{_ as H}from"./BreadcrumbNav.vue_vue_type_script_setup_true_lang-BNPCZwx3.js";import{C as Q,D as W}from"./vue3-smooth-dnd.esm-DCVSUFqs.js";import{c as X,_ as T}from"./index-Cz-1_Owd.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=X("list-todo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Y={},Z={xmlns:"http://www.w3.org/2000/svg",version:"1.0",viewBox:"0 0 66.4 81.363"};function ee($,l){return d(),m("svg",Z,l[0]||(l[0]=[o("path",{d:"M388.15 530.07c-3.73.72-3.29 2.41-3.66 3.91l1.77 71.54c-.08 2.18.46 3.79 3.02 3.53l54.52.16c1.88-.31 3.43-1.07 3.56-3.82l1.53-72.41c-.18-3.22-2.16-3.1-4.06-3.13l-56.68.22z",style:{"stroke-linejoin":"round",stroke:"#000","stroke-linecap":"round","stroke-width":"2",fill:"none"},transform:"translate(-383.485 -528.842)"},null,-1),o("path",{d:"M392.76 545.62v12.29l11.91-.49 1.04-11.31-12.95-.49zM410.63 554.23l31.81-.42M409.32 571.7h31.8M409.92 589.7l31.71.3",style:{"stroke-linejoin":"round","fill-opacity":"0.99219",stroke:"#000",fill:"#fff"},transform:"translate(-383.485 -528.842)"},null,-1),o("path",{d:"m396.46 549.43-1.23 1.02 3.54 4.28 10.75-9.48-1.85-1.91-8.67 8.64-2.54-2.55z",style:{"stroke-linejoin":"round","fill-opacity":"0.99219",stroke:"red",fill:"red"},transform:"translate(-383.485 -528.842)"},null,-1),o("path",{d:"M392.89 563.1v12.29l11.92-.49 1.03-11.3-12.95-.5zM393.39 581.54v12.29l11.92-.49 1.04-11.31-12.96-.49z",style:{"stroke-linejoin":"round","fill-opacity":"0.99219",stroke:"#000",fill:"#fff"},transform:"translate(-383.485 -528.842)"},null,-1)]))}const te=T(Y,[["render",ee]]),ae={class:"max-w-2xl mx-auto px-4 py-4"},le={class:"text-center mb-8 flex flex-row items-center gap-2 justify-center"},se={class:"flex flex-wrap gap-2 justify-end mb-6"},oe={class:"inline-flex items-center cursor-pointer"},ne={class:"bg-white p-6 rounded-lg shadow-md mb-6"},re={key:0,class:"text-red-500 text-sm mt-2"},ie={key:0,class:"bg-white p-6 rounded-lg shadow-md text-center text-gray-500"},ce={class:"bg-white p-4 rounded-lg shadow-sm flex items-center justify-between group"},de={class:"flex items-center flex-grow gap-2"},ue=["onDblclick"],pe={class:"flex gap-1"},me={key:1,class:"mt-6 text-center"},fe={components:{ListTodo:V}},ve=O({...fe,__name:"ToDoList",setup($){const l=b([]),f=b(""),i=b(""),k=F();B(()=>{const t=localStorage.getItem("todoList");t&&(l.value=JSON.parse(t))});const u=()=>{localStorage.setItem("todoList",JSON.stringify(l.value))};U(l,u,{deep:!0});const w=()=>{const t=f.value.trim();if(!t){i.value="La tarea no puede estar vacÃ­a.";return}if(l.value.some(e=>e.text.toLowerCase()===t.toLowerCase())){i.value="Esta tarea ya existe.";return}l.value.unshift({id:Date.now(),text:t,done:!1}),f.value="",i.value="",u()},C=t=>{l.value[t].editing=!0,K(()=>{})},h=t=>{const e=l.value[t];if(!e.text.trim()){i.value="La tarea no puede estar vacÃ­a.";return}if(l.value.some((a,n)=>n!==t&&a.text.toLowerCase()===e.text.toLowerCase())){i.value="Esta tarea ya existe.";return}e.text=e.text.trim(),e.editing=!1,i.value="",u()},I=t=>{k.require({message:"Â¿Seguro que deseas eliminar esta tarea?",header:"Confirmar eliminaciÃ³n",icon:"pi pi-exclamation-triangle",acceptLabel:"SÃ­, eliminar",rejectLabel:"Cancelar",acceptIcon:"pi pi-trash",rejectIcon:"pi pi-times-circle",acceptClass:"p-button-danger",rejectClass:"p-button-warning",accept:()=>{l.value.splice(t,1),u()}})},D=()=>{k.require({message:"Â¿EstÃ¡s seguro de que quieres limpiar todas las tareas?",header:"Confirmar limpieza",icon:"pi pi-exclamation-triangle",acceptLabel:"SÃ­, limpiar",rejectLabel:"Cancelar",acceptIcon:"pi pi-trash",rejectIcon:"pi pi-times-circle",acceptClass:"p-button-danger",rejectClass:"p-button-warning",accept:()=>{l.value=[],u()}})};function M(t){if(!t||t.removedIndex===null&&t.addedIndex===null)return;const e=[...l.value],[a]=e.splice(t.removedIndex,1);e.splice(t.addedIndex,0,a),l.value=e,u()}const z=()=>{const t=JSON.stringify(l.value,null,2),e=new Blob([t],{type:"application/json"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download="lista-pendientes.json",n.click(),URL.revokeObjectURL(a)},J=t=>{const e=t.target;if(!e.files||!e.files[0])return;const a=e.files[0],n=new FileReader;n.onload=c=>{try{const y=JSON.parse(c.target?.result);if(!Array.isArray(y)||!y.every(_=>typeof _.id=="number"&&typeof _.text=="string"&&typeof _.done=="boolean")){i.value="Archivo JSON invÃ¡lido.";return}l.value=y,u(),i.value=""}catch{i.value="No se pudo leer el archivo JSON."}},n.readAsText(a)};return(t,e)=>(d(),m("div",null,[r(H),o("div",ae,[o("div",le,[r(te,{class:"w-10 h-10 text-blue-600 mb-2"}),e[1]||(e[1]=o("h1",{class:"text-3xl font-bold text-center text-gray-800 mb-2"}," Lista de pendientes ",-1))]),o("div",se,[r(s(p),{onClick:z,icon:"pi pi-download",label:"Descargar JSON",outlined:"",size:"small"}),o("label",oe,[r(s(p),{icon:"pi pi-upload",label:"Cargar JSON",outlined:"",size:"small",class:"mr-2"}),o("input",{type:"file",accept:"application/json",onChange:J,class:"hidden"},null,32)])]),r(s(R)),o("div",ne,[r(s(G),null,{default:g(()=>[r(s(S),null,{default:g(()=>[r(s(V),{class:"w-5 h-5 text-gray-400"})]),_:1}),r(s(N),{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),onKeyup:j(w,["enter"]),placeholder:"Nueva tarea...",class:"flex-grow p-3 border-none focus:ring-2 focus:ring-blue-500"},null,8,["modelValue"]),r(s(S),null,{default:g(()=>[r(s(p),{onClick:w,disabled:!f.value.trim(),icon:"pi pi-plus",class:"rounded-md ml-0"},null,8,["disabled"])]),_:1})]),_:1}),i.value?(d(),m("p",re,L(i.value),1)):v("",!0)]),l.value.length===0?(d(),m("div",ie,e[2]||(e[2]=[o("p",null,"Â¡No tienes tareas pendientes! ðŸŽ‰",-1)]))):v("",!0),r(s(Q),{tag:"ul",class:"space-y-3","drag-handle-selector":".drag-handle",onDrop:M},{default:g(()=>[(d(!0),m(E,null,q(l.value,(a,n)=>(d(),x(s(W),{key:a.id},{default:g(()=>[o("li",ce,[o("div",de,[e[3]||(e[3]=o("span",{class:"drag-handle cursor-move text-gray-400 hover:text-blue-500 transition",title:"Arrastrar para reordenar"},[o("i",{class:"pi pi-bars"})],-1)),r(s(P),{modelValue:a.done,"onUpdate:modelValue":c=>a.done=c,onChange:u,binary:!0,class:"mr-2"},null,8,["modelValue","onUpdate:modelValue"]),a.editing?(d(),x(s(N),{key:1,modelValue:a.text,"onUpdate:modelValue":c=>a.text=c,onKeyup:j(c=>h(n),["enter"]),onBlur:c=>h(n),class:"flex-grow",autofocus:""},null,8,["modelValue","onUpdate:modelValue","onKeyup","onBlur"])):(d(),m("span",{key:0,class:A([{"line-through text-gray-500":a.done,"text-gray-800":!a.done},"text-lg flex-grow cursor-pointer"]),onDblclick:c=>C(n),title:"Doble clic para editar"},L(a.text),43,ue))]),o("div",pe,[a.editing?v("",!0):(d(),x(s(p),{key:0,onClick:c=>C(n),icon:"pi pi-pencil",text:"",class:"text-blue-500",title:"Editar"},null,8,["onClick"])),a.editing?(d(),x(s(p),{key:1,onClick:c=>h(n),icon:"pi pi-check",text:"",class:"text-green-600",title:"Guardar"},null,8,["onClick"])):v("",!0),r(s(p),{onClick:c=>I(n),icon:"pi pi-trash",text:"",severity:"danger",title:"Eliminar"},null,8,["onClick"])])])]),_:2},1024))),128))]),_:1}),l.value.length>0?(d(),m("div",me,[r(s(p),{onClick:D,label:"Limpiar Todo",icon:"pi pi-trash",severity:"danger"})])):v("",!0)])]))}}),be=T(ve,[["__scopeId","data-v-f89f90f5"]]);export{be as default};
